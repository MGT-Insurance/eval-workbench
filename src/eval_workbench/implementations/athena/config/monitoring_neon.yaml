version: "1.0"
name: "athena_neon_monitor"
environment: "${ENVIRONMENT:-production}"

scored_store:
  type: db

schedule:
  interval_minutes: 5

source:
  type: neon
  name: "athena_cases"
  component: "recommendation"
  eval_mode: "online"
  environment: "${ENVIRONMENT:-production}"
  query: |
    SELECT
      id,
      quote_locator,
      recommendation_entries,
      langfuse_trace_id,
      created_at
    FROM athena_cases
    WHERE created_at >= NOW() - INTERVAL '1 hour'
    ORDER BY created_at DESC
  extractor: "eval_workbench.implementations.athena.extractors.extract_recommendation_from_row"
  limit: 100

sampling:
  strategy: all
  n: 50
  seed: 42

metrics_config:
  UWFaithfulness:
    class: "uw_faithfulness"
    verification_mode: 'heuristic_then_llm'

publishing:
  push_to_db: true
  push_to_langfuse: false
  database:
    on_conflict: do_nothing
    chunk_size: 1000
